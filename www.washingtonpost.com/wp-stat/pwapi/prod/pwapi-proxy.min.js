!function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function e(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function c(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?e(Object(a),!0).forEach(function(t){var e,n;e=o,t=a[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(a,t))})}return o}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var n,i=[],p=["www.washingtonpost.com","pb-impact.washingtonpost.com","fusion-sandbox.washingtonpost.com","www.wapodev.com","www.wapostage.com","pb-dev.digitalink.com","pb-staging.digitalink.com","localhost","localhost.digitalink.com","localhost.washingtonpost.com","subscribe.digitalink.com",".*.preview.now.washingtonpost.com"],t={prod:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},fStage:{anon:{default:3e5,optedOut:63072e6},signed:{default:3e5,optedOut:3e5}},fqa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}},stage:{anon:{default:864e5,optedOut:63072e6},signed:{default:864e5,optedOut:864e5}},qa:{anon:{default:3e5,optedOut:18e5},signed:{default:3e5,optedOut:3e5}}};function l(t){for(var e=!1,n=0;n<p.length;n+=1){var o=new RegExp(p[n]);if(t.match(o)){e=!0;break}}return e}function g(){if(void 0!==n)return n;try{var t=(new Date).toString();window.localStorage.setItem(t,t);var e=window.localStorage.getItem(t)===t;return window.localStorage.removeItem(t),n=e}catch(t){return void(n=!1)}}function m(t){if(!t)return null;if(!document.cookie)return null;for(var e,n,o={},a=null,i=document.cookie.split(";"),s=0;s<i.length;s++)0<i[s].indexOf("=")&&(n=(e=i[s].split("="))[0],e=e[1],(n=n&&n.trim())===t&&(a=(e=e||"").trim()),o[n]=e.trim());return a}function f(t,e,n,o,a,i){var s="",r="",c=".washingtonpost.com",a=!1===a?"":";secure";n<0?s=";expires=".concat(new Date(1e3).toUTCString):0<n&&(s=";expires=".concat(new Date(n).toUTCString())),null!=(c="qa"===i?".digitalink.com":c)&&(r=";domain=".concat(c)),e=e||"";e=o?e:encodeURIComponent(e),a="".concat(t,"=").concat(e,";path=/").concat(s).concat(r).concat(a);document.cookie=a}function u(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return;return 1}function h(t,e,n){g()&&!u(e)&&l(window.location.hostname)&&(e.e=Date.now()+(n||0),localStorage.setItem(t,JSON.stringify(e)))}function w(e,a,i,s){return a=a||"GET",i=i&&JSON.stringify(i)||null,new Promise(function(n,o){var t=new XMLHttpRequest;t.open(a,e,!0),t.timeout=3e3,t.withCredentials=!0,s&&s.contentType&&t.setRequestHeader("Content-Type",s.contentType),t.onload=function(t){if(4===(t=t.target||{}).readyState&&200===t.status){var e={};try{(e=JSON.parse(t.response)).statusCode=200,n(e)}catch(t){o("")}}else 400<=t.status&&o({message:t.status})},t.onerror=function(t){o("")},t.ontimeout=function(){o("")},t.send(i)})}function d(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}var y="wapo_identity",v="wapo_secure_login_id",S="wp_usp",_="privacySetting",b={iabSpec:1,explicitNotice:"Y",optOut:"N",lspa:"Y"},O={prod:{env:"prod",feLoggingApi:"https://www.washingtonpost.com/subscribe/logging/",pwapiProxyApi:"https://www.washingtonpost.com/pwapi-proxy/pwproxy",pwapiProxyV2Api:"https://www.washingtonpost.com/pwapiv2/article",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://www.washingtonpost.com/subscribe/user/auth-status",sipUrl:"https://www.washingtonpost.com/subscribe/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.washingtonpost.com/swg/check-entitlement"},fStage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",pwapiProxyApi:"https://pwapiproxy-stage.washingtonpost.com/pwproxy",pwapiProxyV2Api:"https://subs-stage.washingtonpost.com/pwapiv2/article",cookieDomain:".washingtonpost.com",LSDomain:"www.wapostage.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},stage:{env:"stage",feLoggingApi:"https://subs-stage.washingtonpost.com/logging/",pwapiProxyApi:"https://pwapiproxy-stage.washingtonpost.com/pwproxy",pwapiProxyV2Api:"https://subs-stage.washingtonpost.com/pwapiv2/article",cookieDomain:".washingtonpost.com",LSDomain:"www.washingtonpost.com",authStatusUrl:"https://subs-stage.washingtonpost.com/user/auth-status",sipUrl:"https://subs-stage.washingtonpost.com/user/save-identity-preferences",checkEntitlementUrl:"https://subs-stage.washingtonpost.com/swg/check-entitlement"},fQa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",pwapiProxyApi:"https://testpwapi-proxy.digitalink.com/pwproxy",pwapiProxyV2Api:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"www.wapodev.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"},qa:{env:"qa",feLoggingApi:"https://subscribe.digitalink.com/logging/",pwapiProxyApi:"https://testpwapi-proxy.digitalink.com/pwproxy",pwapiProxyV2Api:"https://tetro.digitalink.com/evaluate",cookieDomain:".digitalink.com",LSDomain:"pb-dev.digitalink.com",authStatusUrl:"https://subscribe.digitalink.com/user/auth-status",sipUrl:"https://subscribe.digitalink.com/user/save-identity-preferences",checkEntitlementUrl:"https://subscribe.digitalink.com/swg/check-entitlement"}};function x(){var t="prod";return-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pb/")||-1!==window.location.hostname.indexOf("pb-impact")||-1!==window.location.hostname.indexOf("impact.wash")||-1!==window.location.hostname.indexOf("vforum-stage.")?t="stage":-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.wash")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("sandbox.wash")||-1!==window.location.hostname.indexOf("preview.now.washingtonpost.com")?t="fStage":-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf("/pf/")||-1!==window.location.hostname.indexOf("localhost.digitalink")&&-1!==window.location.href.indexOf(":3000")||-1!==window.location.hostname.indexOf("www.digitalink.com")||-1!==window.location.hostname.indexOf("dev.wash")&&-1!==window.location.href.indexOf("/pf/")?t="fQa":-1===window.location.hostname.indexOf("digitalink.com")&&-1===window.location.hostname.indexOf("dev.wash")||(t="qa"),t}function k(){return O[x()]}var C="v2lby2xr2";var T={},P=window.performance&&window.performance.timing||{},I=(new Date).getTime(),D={};function E(t){s(D,t),window.pwapiPaywallResponse=D;for(var e=0;e<window.extConsumers.length;e++)window.extConsumers[e](D);for(var n=0;n<window.consumers.length;n++)window.consumers[n](D)}function A(t,e){for(var n=e.split("."),o=0,a=n.length;null!=t&&o<a;)t=t[n[o++]];return o&&o===a?t:void 0}var U=(new Date).getTime();function j(t,e,n){var o,a=k();switch(n=n||{},e=e||"",t){case"info":o="logInfo";break;case"success":o="logSuccess";break;case"error":o="logHandledError";break;case"expectedError":o="logExpectedError";break;default:o="logInfo"}a=a.feLoggingApi;try{var i=new XMLHttpRequest;i.open("POST",a+o,!0),i.setRequestHeader("Content-Type","application/json"),n.processId=U,n.path=window.location.pathname;var s={appName:"site-paywall",locationId:"pwapi-proxy",message:e,state:n};i.withCredentials=!0,i.send(JSON.stringify(s)),i.onload=function(){},i.onerror=function(){}}catch(t){console.error("LOGGING ERROR")}}function N(t){var o;(t=t||{}).referrer=document.referrer,s(t,(o={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,n){0<=i.indexOf(e)&&(o[e]=n)}),o));var e,n,a="";for(e in t)t.hasOwnProperty(e)&&("string"==typeof(n=t[e])&&""!==n&&(a+="".concat(e,"=").concat(encodeURIComponent(n.trim()),"&")));return a}function R(i){var s=k()||{};return new Promise(function(e,t){var n,o,a={entitlements:i};if(n=document.cookie.match(/wapo_login_id=([^\;]*)/),o=document.cookie.match(/wapo_secure_login_id=([^\;]*)/),null!=n&&null!=n[1]&&null!=o&&null!=o[1])return e({status:"NOT_CHECKED",systemMessages:"User logged in"});w(s.checkEntitlementUrl,"POST",a,{contentType:"application/json"}).then(function(t){e(t)}).catch(function(t){t={status:"ERROR",systemMessages:"Check Entitlement failed with ".concat(t.message)};e(t)})})}function M(t,e){var n,o,a,i;e&&(n=e.split(","),i=[],a=[],o={fusion:{metadata:"wpMetaData",content_type:"content_type",ct_tags:"ct_tags",sct_tags:"sct_tags"},classic:{metadata:"wp_meta_data",content_type:"contentType",ct_tags:"tags_for_paywall",sct_tags:"tags_for_paywall_subs"}}[T.name],a=(e=window[o.metadata]||{})[t=o[t]]&&e[t].split(",")||[],i=[].concat(r(a),r(n)),e[t]=i.join(","),window[o.metadata]=e)}function L(t){var e,n,o=t.actionCodes;e=o,n=!1,t=m("wp_dbg_ent"),(n=0<=e.toString().indexOf("23")||null!=t||n)&&M("sct_tags","subs_enterprise"),n=!1,(n=0<=o.toString().indexOf("903")||n)&&M("ct_tags","subs_bbe")}function J(t){var e=function(){if(!g())return null;var t=null,e=localStorage.getItem("kxwashingtonpost_segs");return t=e&&0<=e.indexOf(C)?C:t}();return e&&function(t,e,n){if(e&&n){var o=n.split(","),n=t[e]&&t[e].split(",")||[],o=[].concat(r(n),r(o));t[e]=o.join(",")}}(t,"pwapi_ct_tags",e),t}var q=[{name:"wapo_login_id",expireOffsetMillis:36e5,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wapo_secure_login_id",expireOffsetMillis:36e5,cookiesToLocalStorage:!1,localStorageToCookies:!0,useDelimiter:!1},{name:"wp_ak_v_m",expireOffsetMillis:5184e6,cookiesToLocalStorage:!0,localStorageToCookies:!0,useDelimiter:!0,delimiterValue:"|",notEncoded:!0}];function V(t,e){var n,o,a;(n=document.createElement("script")).type="text/javascript",n.setAttribute("subscriptions-control","manual"),n.src="https://news.google.com/swg/js/v1/swg.js",n.onerror=function(){},document.head.appendChild(n),o=t,a=e,(window.SUBSCRIPTIONS=window.SUBSCRIPTIONS||[]).push(function(t){var e=!1,n={process:"swg-entitlement"};if(-1===window.location.href.indexOf("localhost.")&&-1===window.location.href.indexOf("local."))try{t.init("washingtonpost.com:basic"),t.getEntitlements().then(function(t){return t&&t.entitlements&&0<t.entitlements.length?(E({action:0,data:{action:0},status:"final"}),e=!0,n.numEntitlements=t.entitlements.length,n.pwresp_action=o,n.pwresp_action_final=0,n.pwresp_mtrct=a,n.raw_entitlements=JSON.stringify(t.entitlements),t.entitlements.forEach(function(t,e){0<=t.source.indexOf("washingtonpost.com")?(n.postSWGPurchase=!0,t.subscriptionToken?n["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.subscriptionToken):n["entitlement_".concat(e)]="entitlementType=post|subscriptionToken=".concat(t.signedEntitlements)):t.subscriptionToken&&(n.gglSWGPurchase=!0,t=JSON.parse(t.subscriptionToken),n["entitlement_".concat(e)]="entitlementType=google|orderId=".concat(t.orderId,"|packageName=").concat(t.packageName,"|productId=").concat(t.productId,"|purchaseTime").concat(t.purchaseTime))})):E({status:"final"}),t}).then(function(t){e&&R(t.entitlements).then(function(t){var e=[];e.push("isEntitled=".concat(t.status)),t.createAccount&&e.push("isLinked=".concat(!t.createAccount)),t.systemMessages&&e.push("messages=".concat(t.systemMessages)),n.entitlement_status=e.join("|"),j("info","swg entitlements",n)})}).catch(function(){E({status:"final"})})}catch(t){E({status:"final"})}else E({status:"final"})}),setTimeout(function(){"final"!==D.status&&E({status:"final"})},5e3)}window.consumers=window.consumers||[],window.extConsumers=window.extConsumers||[],D.status="init";var H={};function W(t,e){var n=t.data&&t.data.actionCodes?"v2":"v1",o="v2"==n?"v2_":"",a=(t=t,"v1"===n?t:c(c({},t),{},{sub:t.data.isSubscriber?1:0,data:c({action:t.data.action,actions:t.data.actionCodes,ip:t.data.ipAddress||null,mtr:t.data.meterState,mtrct:t.data.meterCount,mtrw:t.data.articleWeight,mtrwman:t.data.articleWeightManual,mtrwmac:t.data.articleWeightMachine,sgn:t.data.isSignedIn?1:0},t.data)}));if(a.listeningTo=e,H.process="paywall-display",H["pwresp_".concat(o,"action")]=a.data.action,H["pwresp_".concat(o,"actions")]=a.data.actions.join(","),H["pwresp_".concat(o,"mtrct")]=a.data.meterCount,n===e){a.status="processing",window.pwapiPaywallStatus=200;var e=a.data.meterCount,i={3:"paywall",6:"softwall",9:"regwall"}[a.data.action],s=a.data.wallMeterType,r="";switch(i){case"paywall":r="".concat(s||"meter","_").concat(i),2===a.data.articleWeight&&(r="double_meter_".concat(i)),a.data.mtrct=r,a.data.meterCount=r;break;case"softwall":case"regwall":s&&(a.data.mtrct="".concat(s,"_").concat(i),a.data.meterCount="".concat(s,"_").concat(i))}L(a.data),!function(){if(g()){var t,e=localStorage.getItem("wp_sponsored");return-1<window.location.search.indexOf("das=pw_spsrd_hit")||-1<window.location.search.indexOf("pw_unlock_mgclink")?(localStorage.setItem("wp_sponsored",window.location.pathname),"function"==typeof window.history.replaceState&&(t=(t=window.location.href).replace(/das=[^\&]*/,""),window.history.replaceState({},null,t)),1):!(!e||window.location.pathname!==e)}}()?3===a.data.action||8===a.data.action||9===a.data.action?V(a.data.action,e):a.status="final":(a.status="final",a.action=0,a.data.action=0),E(a)}return a}function Y(t,e,n){t=t||{},e=e||"info",E({status:"error"});n={process:"pwapiproxy-".concat(n,"response"),xhrstatus:t.statusCode};t.timeout&&(n.timeout=t.timeout),j(e,t.msg,n)}function G(t){var i,s,r,c,p,e=function(t,e){var n=1<arguments.length&&void 0!==e&&e,e=(document.cookie.match(/wp_pwapi=([^\;]*);/)||{})[1]||x();if(n){var o=O[e].pwapiProxyV2Api||O.prod.pwapiProxyV2Api;if([/^www-washingtonpost-com/].some(function(t){return t.test(window.location.hostname)})){n=document.createElement("a");return n.href=o,n.pathname}return o}return o=O[e].pwapiProxyApi||O.prod.pwapiProxyApi,e=window.location.pathname,t="".concat(N(t),"&as_json=1"),"".concat(o+e,"?").concat(t)}(t,!0),n=function(e){if("v2"===d("pwapiVersion"))return"v2";if("v1"===d("pwapiVersion"))return"v1";var t={commercial_node:[],href:[]},n=window.location.href,o="v2";return t.href.forEach(function(t){t=new RegExp(t);n&&n.match(t)&&(o="v2")}),t.commercial_node.forEach(function(t){t=new RegExp(t);e.commercial_node&&e.commercial_node.match(t)&&(o="v2")}),o}(t);Promise.all([(i=e,s=t,c=n,p={method:(r="v2")===r?"POST":"GET",withCredentials:!0,timeout:5e3},new Promise(function(n){var t,e,o,a=null;"v2"===r&&(t=N(s),e=window.location.href&&window.location.href.split("?")[0]||"",a=JSON.stringify({articles:[{article:"".concat(e,"?").concat(t)}]}));try{i&&((o=new XMLHttpRequest).open(p.method,i),o.timeout=p.timeout,o.withCredentials=p.withCredentials,o.onload=function(){if(window["pwapi".concat(r,"Response")]=(new Date).getTime()-I,window["pwapiAPI".concat(r,"End")]=(new Date).getTime()-(P.navigationStart||0),o.readyState===XMLHttpRequest.DONE&&200===o.status){window["pwapiAPI".concat(r,"Ready")]=(new Date).getTime()-(P.navigationStart||0);var t={};try{(t=JSON.parse(o.response)).statusCode=o.status,W(t,c),n(t)}catch(t){var e={status:"error",statusCode:t.statusCode=-1,msg:"pwapiproxy ".concat(r," response invalid").concat(t.statusText?" - ".concat(t.statusText):"")};Y(e,"error",r),n(e)}}else o.readyState===XMLHttpRequest.DONE&&202===o.status?n({status:"error",msg:"black hole"}):(Y(e={status:"error",statusCode:o.status,msg:"pwapiproxy ".concat(r," response invalid")},"error",r),n(e))},o.onerror=function(t){window["pwapiAPI".concat(r,"End")]=(new Date).getTime()-(P.navigationStart||0);t={status:"error",statusCode:t&&t.statusCode?t.statusCode:500};t.msg="pwapiproxy ".concat(r," error"),Y(t,"error",r),n(t)},o.ontimeout=function(){var t={status:"error",statusCode:504,timeout:((new Date).getTime()-I)/1e3,msg:"PWAPIPROXY ".concat(r.toUpperCase()," TIMEOUT")};Y(t,"expectedError",r),n(t)},o.setRequestHeader("Content-Type","application/json"),window["pwapiAPI".concat(r,"Start")]=(new Date).getTime()-(P.navigationStart||0),o.send(a))}catch(t){a={status:"error",statusCode:500};a.msg="pwapiproxy ".concat(r," error").concat(t.message?" - ".concat(t.message):""),Y(a,"error",r),n(a)}}))]).then(function(){(3<=H.pwresp_action||H.hasOwnProperty("pwresp_v2_action")&&H.hasOwnProperty("pwresp_action")&&H.pwresp_action!==H.pwresp_v2_action)&&j("info","pwresp action: ".concat((H.pwresp_action||"").toString()||(H.pwresp_v2_action||"").toString()),H)}).catch(function(){})}window.registerPwapiConsumer=function(t){window.consumers.push(t),t(D)},window.registerExtUpdates=function(t){window.extConsumers.push(t),t(D)},window.extListener=function(t){E(t)};var X={};X.pwapi_contentsection=window.wp_section||A(window.TWP,"Data.Tracking.props.section"),X.pwapi_ct_tags=A(window.wp_meta_data,"tags_for_paywall"),X.pwapi_sct_tags=A(window.wp_meta_data,"tags_for_paywall_subs"),X.commercial_node=A(window.TWP,"Data.Tracking.props.commercial_node"),X.content_type=A(window.TWP,"Data.Tracking.props.content_type"),X.is_amp="0",X.env=window.renderingEnv||"";var $,B=X,F=k()||{},Q=($=F.env,t[$]);function K(i){return new Promise(function(e,n){var t,o,a;"auth-status"===i?w("".concat(F.authStatusUrl,"?_v=").concat((new Date).getTime())).then(function(t){e(t)}).catch(function(t){n({status:"FAIL",errorState:"Auth Status failed"})}):"sip"===i?(t=et(),o=s(o={caller:"SubsStorageManager",requestId:(a=window.crypto||window.msCrypto,([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^a.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})),authStatus:!0},t),w(F.sipUrl,"POST",o,{contentType:"application/json"}).then(function(t){e(t)}).catch(function(t){n("Auth Status failed")})):n("Invalid action: ".concat(i))})}function z(t){for(var e=0;e<window.authConsumers.length;e++)window.authConsumers[e](t)}function Z(t){var e=m(v),t=!(!t||!t.ccpa||"Y"!==t.ccpa.optOut),t=Q&&Q[!!e?"signed":"anon"][t?"optedOut":"default"]||0;return Date.now()+t}function tt(t){var e;g()&&l(window.location.hostname)&&(t=Z((e=s(e=(e=localStorage.getItem(y))&&JSON.parse(e)||{},t)).privacySetting||{}),e.e=t,localStorage.setItem(y,JSON.stringify(e)))}function et(){var t,e,n=null;return g()&&localStorage.getItem(y)&&((e=!1,g()&&localStorage.getItem(y)&&((t=JSON.parse(localStorage.getItem(y))).e&&Date.now()>t.e&&(e=!0)),e)?g()&&localStorage.removeItem(y):n=JSON.parse(localStorage.getItem(y))),n}function nt(t){if(g()&&localStorage.getItem(y))return JSON.parse(localStorage.getItem(y))[t]}function ot(n){var t,e,o;return n=n||(t=m(v),e=m(S),!1===nt("signedIn")&&t?"sip":(window.wp_meta_data&&window.wp_meta_data.tags_for_paywall&&-1!==window.wp_meta_data.tags_for_paywall.indexOf("ccpa")||window.wpMetaData&&window.wpMetaData.ct_tags&&-1!==window.wpMetaData.ct_tags.indexOf("ccpa")||!!(u(et())||t&&!e))&&"auth-status"),new Promise(function(t,e){!1!==n?K(n).then(function(t){t&&"SUCCESS"===t.status&&tt(o=t.userState)}).finally(function(){z(o=et()),t(o)}):(z(o=et()),t(o))})}function at(){ot()}window.authConsumers=window.authConsumers||[],window.registerAuthConsumer=function(t){window.authConsumers.push(t),t(et())},window.updateIdentity=function(t){if(g()){var e=l(window.location.hostname),n=localStorage.getItem(y);if(e&&null!=n)try{var o=s(n=n&&JSON.parse(n)||{},t);localStorage.setItem(y,JSON.stringify(o))}catch(t){}}},window.storePrivacySetting=function(t){t="object"===o(t)?t:{};var e,n=nt(_)||{};n.ccpa=c(c(c({},b),n.ccpa),t.ccpa),u(n)||(e=m(v),t="".concat(n.ccpa.iabSpec,n.ccpa.explicitNotice,n.ccpa.optOut,n.ccpa.lspa),tt({privacySetting:n}),e?ot("sip"):(e=x(),n=Z(n),f(S,t,n,!0,!0,e)))};var it={getUspString:function(t){return"".concat((t=t||{}).iabSpec,t.explicitNotice,t.optOut,t.lspa)},getUSPData:function(t,e){var n,o,a="".concat(t,"---");g()&&localStorage.getItem(y)&&(n=nt("geoState"),navigator.globalPrivacyControl&&"CA"===n?a="1YYY":(o=nt(_))&&o.ccpa&&(a=it.getUspString(o.ccpa))),a&&((o={}).version=t,o.uspString=a,e(o,!0))},v1:{getUSPData:function(t){it.getUSPData(1,t)}}};function st(){window.pwapiVersion="Version 1.8.2 on Fri, 14 May 2021 16:18:17 GMT",window.pwapiStart=I-(P.navigationStart||0),J(B),G(B),function(t){var e={},n={};if(g()){for(var o=0;o<q.length;o++){var a=q[o];try{var i=a.name,s=m(i),r=localStorage.getItem(i),c={};if(r)try{(c=JSON.parse(r)).e<(new Date).getTime()&&(c={},localStorage.removeItem(i))}catch(t){c={},localStorage.removeItem(i)}var p,l,u,w=null!=s,d=null!=c.v;d&&!w&&a.localStorageToCookies&&(f(i,c.v,c.e,a.notEncoded,!0,t),n[i]=c.v),!d&&w&&a.cookiesToLocalStorage&&h(i,{v:s},a.expireOffsetMillis),w&&d&&a.useDelimiter&&(p=a.delimiterValue||"|",l=s.split(p),u=c.v.split(p),a.cookiesToLocalStorage&&l&&u&&l[1]&&l[1]!==u[1]?h(i,{v:s},a.expireOffsetMillis):a.localStorageToCookies&&l&&u&&l[0]!==u[0]&&(!l[1]||l[1]===u[1])&&f(i,c.v,c.e||Date.now()+a.expireOffsetMillis,a.notEncoded,!0,t))}catch(t){console.error("Unable to synchCookiesAndLocalStorage for synchCookie item: ".concat(JSON.stringify(a)),t)}}try{(0<Object.keys(n).length||0<Object.keys(e).length)&&j("info","User storage Synced",{process:"storage-sync","cookie-sync":JSON.stringify(e),"ls-sync":JSON.stringify(n)})}catch(t){}}}(x())}window.addEventListener("message",function(n){var t,e;return n.data.hasOwnProperty("__uspapiCall")&&(n.stopImmediatePropagation&&n.stopImmediatePropagation(),t=n.data.__uspapiCall.command,e=n.data.__uspapiCall.version,t&&e&&window.__uspapi(t,e,function(t,e){e?n.source.postMessage({__uspapiReturn:{returnValue:t,success:e,callId:n.data.__uspapiCall.callId}},n.origin):n.source.postMessage({__uspapiReturn:{returnValue:{version:1,uspString:"1NYY"},success:!1,callId:n.data.__uspapiCall.callId}},n.origin)})),null},!1),T.name="classic";try{window.__uspapi=function(t,e,n){return it["v".concat(e)]&&"function"==typeof it["v".concat(e)][t]?n?void it["v".concat(e)][t].apply(null,[n]):it["v".concat(e)][t]:!!n&&void n(null,!1)}}catch(t){}if("function"==typeof Promise)try{st(),setTimeout(at,0)}catch(t){}else document.addEventListener("pb-core-loaded",function(){try{st(),setTimeout(at,0)}catch(t){}})}();
